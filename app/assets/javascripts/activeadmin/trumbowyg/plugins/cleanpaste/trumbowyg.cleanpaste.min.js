!function(e){"use strict";function r(e){for(var r="",t=e.length-1;t>=0;t-=1)r+=e.charAt(t);return r}function t(e){var r=e;return r=r.replace(/<[^> ]*/g,function(e){return e.toLowerCase()}),r=r.replace(/<[^>]*>/g,function(e){return e=e.replace(/ [^=]+=/g,function(e){return e.toLowerCase()})}),r=r.replace(/<[^>]*>/g,function(e){return e=e.replace(/( [^=]+=)([^"][^ >]*)/g,'$1"$2"')})}function n(e,n){var a,c,i,l="",s="",u=Math.min(e.length,n.length);for(a=0;n.charAt(a)===e.charAt(a)&&a<=u;a+=1)l+=n.charAt(a);for(var g=a;g>=0;g-=1){if("<"===e.charAt(g)){a=g,l=e.substring(0,a);break}if(">"===e.charAt(g))break}for(n=r(n),e=r(e),c=0;n.charAt(c)===e.charAt(c)&&c<=u;c+=1)s+=n.charAt(c);for(var o=c;o>=0;o-=1){if(">"===e.charAt(o)){c=o,s=e.substring(0,c);break}if("<"===e.charAt(o))break}if(s=r(s),a===n.length-c)return!1;for(n=r(n),i=n.substring(a,n.length-c),i=t(i),i=i.replace(/<b(\s+|>)/g,"<strong$1"),i=i.replace(/<\/b(\s+|>)/g,"</strong$1"),i=i.replace(/<i(\s+|>)/g,"<em$1"),i=i.replace(/<\/i(\s+|>)/g,"</em$1"),i=i.replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,""),i=i.replace(/&nbsp;/gi," "),i=i.replace(/ <\//gi,"</");i.indexOf("  ")!==-1;){var f=i.split("  ");i=f.join(" ")}return i=i.replace(/^\s*|\s*$/g,""),i=i.replace(/<[^>]*>/g,function(e){return e=e.replace(/ ([^=]+)="[^"]*"/g,function(e,r){return["alt","href","src","title"].indexOf(r)!==-1?e:""})}),i=i.replace(/<\?xml[^>]*>/g,""),i=i.replace(/<[^ >]+:[^>]*>/g,""),i=i.replace(/<\/[^ >]+:[^>]*>/g,""),i=i.replace(/<(div|span|style|meta|link){1}.*?>/gi,""),n=l+i+s}e.extend(!0,e.trumbowyg,{plugins:{cleanPaste:{init:function(e){e.pasteHandlers.push(function(){try{var r=e.$ed.html();setTimeout(function(){var t=e.$ed.html();t=n(r,t),e.$ed.html(t)},0)}catch(t){}})}}}})}(jQuery);